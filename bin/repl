#!/usr/bin/env perl
use strict;
use warnings;
# PODNAME: repl

use App::REPL;

my $cfg = "$ENV{HOME}/.replrc";

my %args = (script => $cfg);
if (!-e $cfg) {
    print("$cfg not found. Generating a default...\n");
    if (open my $fh, '>', $cfg) {
        print $fh <DATA>;
        close $fh;
    }
    else {
        warn "Couldn't write to $cfg";
        %args = ();
    }
}

App::REPL->new(%args)->run;

__DATA__
load_plugin
    'Interrupt',

    'FancyPrompt',
    'DataDumper',

    'Colors',
    'ReadLine',
    'Hints',
    'Packages',
    'LexicalPersistence',
    ;

postlude <<POSTLUDE;
use strict;
use warnings;
POSTLUDE
